# HELM Chart
## Getting Started with Helm
1. Add a chart repository.
2. Find a chart to install.
3. Install a Helm chart.
4. See the list of what is installed.
5. Upgrade your installation.
6. Delete the installation.

## Using the get script to install
```bash
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ chmod +x helm-install.sh 
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ ./helm-install.sh 
Downloading https://get.helm.sh/helm-v3.13.1-linux-amd64.tar.gz
Verifying checksum... Done.
Preparing to install helm into /usr/local/bin
helm installed into /usr/local/bin/helm
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ 
```

## Adding a Chart Repository
- `helm repo add bitnami https://charts.bitnami.com/bitnami`

```bash
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ helm repo list
NAME    URL                               
bitnami https://charts.bitnami.com/bitnami
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ 
```

## Searching a Chart Repository
- `helm search repo drupal`

```bash
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ helm search repo drupal
NAME            CHART VERSION   APP VERSION     DESCRIPTION                                       
bitnami/drupal  17.0.1          10.2.0          Drupal is one of the most versatile open source...
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ helm search repo content
NAME                    CHART VERSION   APP VERSION     DESCRIPTION                                       
bitnami/drupal          17.0.1          10.2.0          Drupal is one of the most versatile open source...
bitnami/harbor          19.2.3          2.10.0          Harbor is an open source trusted cloud-native r...
bitnami/nginx           15.6.2          1.25.3          NGINX Open Source is a web server that can be a...
bitnami/owncloud        12.2.11         10.11.0         DEPRECATED ownCloud is an open source content c...
bitnami/wordpress       19.0.8          6.4.2           WordPress is the world's most popular blogging ...
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ 
```
- ` helm search repo drupal --versions`
```bash
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $  helm search repo drupal --versions
NAME            CHART VERSION   APP VERSION     DESCRIPTION                                       
bitnami/drupal  17.0.1          10.2.0          Drupal is one of the most versatile open source...
bitnami/drupal  17.0.0          10.2.0          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.8          10.2.0          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.7          10.2.0          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.6          10.1.7          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.5          10.1.6          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.4          10.1.6          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.3          10.1.6          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.2          10.1.6          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.1          10.1.6          Drupal is one of the most versatile open source...
bitnami/drupal  16.1.0          10.1.5          Drupal is one of the most versatile open source...
bitnami/drupal  16.0.1          10.1.5          Drupal is one of the most versatile open source...
bitnami/drupal  16.0.0          10.1.5          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.8          10.1.5          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.7          10.1.5          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.6          10.1.5          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.5          10.1.4          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.4          10.1.4          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.3          10.1.3          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.2          10.1.2          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.1          10.1.2          Drupal is one of the most versatile open source...
bitnami/drupal  15.1.0          10.1.2          Drupal is one of the most versatile open source...
bitnami/drupal  15.0.4          10.1.2          Drupal is one of the most versatile open source...
bitnami/drupal  15.0.3          10.1.2          Drupal is one of the most versatile open source...
bitnami/drupal  15.0.2          10.1.2          Drupal is one of the most versatile open source...
bitnami/drupal  15.0.1          10.1.2          Drupal is one of the most versatile open source...
bitnami/drupal  15.0.0          10.1.1          Drupal is one of the most versatile open source...
bitnami/drupal  14.1.8          10.1.1          Drupal is one of the most versatile open source...
bitnami/drupal  14.1.7          10.1.1          Drupal is one of the most versatile open source...
bitnami/drupal  14.1.6          10.1.1          Drupal is one of the most versatile open source...
bitnami/drupal  14.1.5          10.0.9          Drupal is one of the most versatile open source...
bitnami/drupal  14.1.4          10.0.9          Drupal is one of the most versatile open source...
bitnami/drupal  14.1.3          10.0.9          Drupal is one of the most versatile open source...
bitnami/drupal  14.1.2          10.0.9          Drupal is one of the most versatile open source...
bitnami/drupal  14.1.1          10.0.9          Drupal is one of the most versatile open source...
bitnami/drupal  14.0.3          10.0.9          Drupal is one of the most versatile open source...
bitnami/drupal  14.0.2          10.0.9          Drupal is one of the most versatile open source...
bitnami/drupal  14.0.1          10.0.8          Drupal is one of the most versatile open source...
bitnami/drupal  14.0.0          10.0.7          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.13         10.0.7          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.12         10.0.7          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.11         10.0.6          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.10         10.0.5          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.9          10.0.4          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.8          10.0.4          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.7          10.0.3          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.6          10.0.3          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.5          10.0.3          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.4          10.0.3          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.3          10.0.3          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.2          10.0.3          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.1          10.0.2          Drupal is one of the most versatile open source...
bitnami/drupal  13.0.0          10.0.1          Drupal is one of the most versatile open source...
bitnami/drupal  12.5.13         9.4.9           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.12         9.4.9           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.11         9.4.8           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.10         9.4.8           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.9          9.4.8           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.8          9.4.8           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.7          9.4.8           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.6          9.4.8           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.5          9.4.7           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.4          9.4.7           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.2          9.4.6           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.1          9.4.6           Drupal is one of the most versatile open source...
bitnami/drupal  12.5.0          9.4.6           Drupal is one of the most versatile open source...
bitnami/drupal  12.4.6          9.4.6           Drupal is one of the most versatile open source...
bitnami/drupal  12.4.5          9.4.6           Drupal is one of the most versatile open source...
bitnami/drupal  12.4.4          9.4.5           Drupal is one of the most versatile open source...
bitnami/drupal  12.4.3          9.4.5           Drupal is one of the most versatile open source...
bitnami/drupal  12.4.2          9.4.5           Drupal is one of the most versatile open source...
bitnami/drupal  12.4.1          9.4.5           Drupal is one of the most versatile open source...
bitnami/drupal  12.4.0          9.4.5           Drupal is one of the most versatile open source...
bitnami/drupal  12.3.5          9.4.5           Drupal is one of the most versatile open source...
bitnami/drupal  12.3.4          9.4.5           Drupal is one of the most versatile open source...
bitnami/drupal  12.3.3          9.4.4           Drupal is one of the most versatile open source...
bitnami/drupal  12.3.2          9.4.4           Drupal is one of the most versatile open source...
bitnami/drupal  12.3.1          9.4.3           Drupal is one of the most versatile open source...
bitnami/drupal  12.3.0          9.4.2           Drupal is one of the most versatile open source...
bitnami/drupal  12.2.14         9.4.2           Drupal is one of the most versatile open source...
bitnami/drupal  12.2.13         9.4.2           Drupal is one of the most versatile open source...
bitnami/drupal  12.2.12         9.4.1           Drupal is one of the most versatile open source...
bitnami/drupal  12.2.11         9.3.16          Drupal is one of the most versatile open source...
bitnami/drupal  12.2.10         9.3.16          Drupal is one of the most versatile open source...
bitnami/drupal  12.2.9          9.3.15          Drupal is one of the most versatile open source...
bitnami/drupal  12.2.8          9.3.15          Drupal is one of the most versatile open source...
bitnami/drupal  12.2.7          9.3.15          Drupal is one of the most versatile open source...
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ 
```

## Installing a Package
- `helm install mysite bitnami/drupal`

```bash
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ helm install mysite bitnami/drupal
NAME: mysite
LAST DEPLOYED: Tue Jan 16 04:24:11 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
CHART NAME: drupal
CHART VERSION: 17.0.1
APP VERSION: 10.2.0** Please be patient while the chart is being deployed **

1. Get the Drupal URL:

  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        Watch the status with: 'kubectl get svc --namespace default -w mysite-drupal'

  export SERVICE_IP=$(kubectl get svc --namespace default mysite-drupal --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
  echo "Drupal URL: http://$SERVICE_IP/"

2. Get your Drupal login credentials by running:

  echo Username: user
  echo Password: $(kubectl get secret --namespace default mysite-drupal -o jsonpath="{.data.drupal-password}" | base64 -d)
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ 
```

```bash
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $  kubectl create ns first
namespace/first created
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $  kubectl create ns second
namespace/second created
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ 
```
- `helm install --namespace first mysite bitnami/drupal`

- `helm install --namespace second mysite bitnami/drupal`

```bash
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ helm install --namespace first mysite bitnami/drupal
NAME: mysite
LAST DEPLOYED: Tue Jan 16 04:26:58 2024
NAMESPACE: first
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
CHART NAME: drupal
CHART VERSION: 17.0.1
APP VERSION: 10.2.0** Please be patient while the chart is being deployed **

1. Get the Drupal URL:

  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        Watch the status with: 'kubectl get svc --namespace first -w mysite-drupal'

  export SERVICE_IP=$(kubectl get svc --namespace first mysite-drupal --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
  echo "Drupal URL: http://$SERVICE_IP/"

2. Get your Drupal login credentials by running:

  echo Username: user
  echo Password: $(kubectl get secret --namespace first mysite-drupal -o jsonpath="{.data.drupal-password}" | base64 -d)
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ helm install --namespace second mysite bitnami/drupal
NAME: mysite
LAST DEPLOYED: Tue Jan 16 04:27:31 2024
NAMESPACE: second
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
CHART NAME: drupal
CHART VERSION: 17.0.1
APP VERSION: 10.2.0** Please be patient while the chart is being deployed **

1. Get the Drupal URL:

  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        Watch the status with: 'kubectl get svc --namespace second -w mysite-drupal'

  export SERVICE_IP=$(kubectl get svc --namespace second mysite-drupal --template "{{ range (index .status.loadBalancer.ingress 0) }}{{ . }}{{ end }}")
  echo "Drupal URL: http://$SERVICE_IP/"

2. Get your Drupal login credentials by running:

  echo Username: user
  echo Password: $(kubectl get secret --namespace second mysite-drupal -o jsonpath="{.data.drupal-password}" | base64 -d)
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ 
```

## Configuration at Installation Time

- `helm install mysite bitnami/drupal --values values.yaml`


```bash
gitpod /workspace/Kubernetes-in-Action/helm-chart (main) $ helm uninstall mysite
release "mysite" uninstalled
``````

- `helm uninstall mysite --namespace first`
- `helm uninstall mysite --namespace second`

**Happy HELM Chart Learning ...!!!**

